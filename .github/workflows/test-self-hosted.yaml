name: Prueba Self-Hosted Runner

on:
  push:
    branches: [main]

jobs:
  # Este job se ejecutará en tu runner “VMWorker1”
  prueba-kubectl:
    runs-on: [self-hosted, linux, vmworker1]
    steps:
      - name: Checkout del repositorio
        uses: actions/checkout@v4

      - name: Mostrar contexto actual de Kubernetes
        run: |
          echo "Contexto activo de kubeconfig:"
          kubectl config current-context
          echo

      - name: Listar nodos del clúster
        run: kubectl get nodes

      - name: Listar pods en namespace dev
        run: kubectl get pods -n dev
